import{j as e}from"./jsx-runtime.BqEXxvvU.js";import{r as o}from"./index.DHQ29l5n.js";import{S as E,V,f as B}from"./SpinnerCircular.By9sOT0_.js";function M({brands:r,selectedBrand:c,searchQuery:n,sortOrder:u,onBrandChange:i,onSearchChange:p,onSortChange:d}){const m=t=>{p(t.target.value)},h=t=>{i(t.target.value)},x=t=>{d(t.target.value)};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx("input",{type:"text",placeholder:"Buscar vehículos...",value:n,onChange:m,className:"p-2 rounded-md border border-gray-700 bg-gray-800 text-white"}),e.jsxs("select",{value:c,onChange:h,className:"p-2 rounded-md border border-gray-700 bg-gray-800 text-white",children:[e.jsx("option",{value:"",children:"Todas las marcas"}),r.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:u,onChange:x,className:"p-2 rounded-md border border-gray-700 bg-gray-800 text-white",children:[e.jsx("option",{value:"desc",children:"Mayor precio"}),e.jsx("option",{value:"asc",children:"Menor precio"})]})]})}function A({currentPage:r,totalPages:c,onPageChange:n}){return e.jsxs("div",{className:"flex justify-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>n(r-1),disabled:r===1,className:"px-4 py-2 rounded-md bg-gray-800 text-white disabled:opacity-50",children:"Anterior"}),e.jsxs("span",{className:"px-4 py-2 text-white",children:["Página ",r," de ",c]}),e.jsx("button",{onClick:()=>n(r+1),disabled:r===c,className:"px-4 py-2 rounded-md bg-gray-800 text-white disabled:opacity-50",children:"Siguiente"})]})}const g=12;function T(){const[r,c]=o.useState([]),[n,u]=o.useState(""),[i,p]=o.useState(""),[d,m]=o.useState("desc"),[h,x]=o.useState(1),[t,f]=o.useState(!0),C=async()=>{try{const s=await B();c(s),f(!1)}catch(s){console.error("Error fetching vehicles:",s),f(!1)}};o.useEffect(()=>{C()},[]);const S=o.useMemo(()=>[...new Set(r.map(a=>a.brand))].sort((a,l)=>a.localeCompare(l)),[r]),b=o.useMemo(()=>{let s=[...r];if(n){const a=n.toLowerCase();s=s.filter(l=>l.name.toLowerCase().includes(a)||l.brand.toLowerCase().includes(a))}return i&&(s=s.filter(a=>a.brand===i)),s.sort((a,l)=>{const j=Number(a.price),y=Number(l.price);return d==="desc"?y-j:j-y}),s},[r,n,i,d]),v=Math.ceil(b.length/g),w=b.slice((h-1)*g,h*g),N=s=>{x(s),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{children:[e.jsx(M,{brands:S,selectedBrand:i,searchQuery:n,sortOrder:d,onBrandChange:p,onSearchChange:u,onSortChange:m}),t?e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(E,{size:69,thickness:136,speed:114,color:"rgba(172, 134, 57, 1)",secondaryColor:"rgba(172, 127, 57, 0.44)"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(s=>e.jsx(V,{vehicle:s},s.id))}),b.length>g&&e.jsx(A,{currentPage:h,totalPages:v,onPageChange:N})]})]})}export{T as VehicleCatalog};
